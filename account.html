<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Glyphland - Accounts</title>
    <link rel="stylesheet" href="test.css">
</head>
<script>
    function findGetParameter(parameterName) {
        var url_string = window.location.href;
        var url = new URL(url_string);
        return url.searchParams.get(parameterName);
    }
</script>
<body>
    <div id="mySidenav" class="sidenav">
            <a class="active" href="account.html">Accounts</a>
            <a href="character.html">Characters</a>
            <a href="clan.html">Clans</a>
            <a href="realm.html">Realms</a>
            <a href="display.php">Show Tables</a>
    </div>
    <div id="main">
        <center>
                <h1>ᚸ ᛝ ᚰ ᚣ Glyphland ᚡ ᚳ ᛃ ᛡ</h1>
                <br>
                <h1>Accounts</h1>
        </center>
            <br>
        <center>
        <div id="resource-box" class="resourceBox">
        <h2>Search</h2>
        <form id=searchForm method="POST" action="account_search.php">
            Email:<br>
            <input type="text" name="email" value=""><br><br>
            <input type="submit">
            <br><br>
            <div>
                <label id="searchStatusText"></label>
            </div>
        </form>

        <br>
        <form id=updateForm action="account_edit.php" method="POST">
            First name:<br>
            <input type="text" id="results_firstname" name="results_firstname" value=""><br><br>
            Last name:<br>
            <input type="text" id="results_lastname" name="results_lastname" value=""><br><br>
            Email:<br>
            <input type="text" id="results_email" name="results_email" value=""><br><br>
            Password:<br>
            <input type="text" id="results_password" name="results_password" value=""><br><br>

            <input type="submit" name="update_button" value="Update" />
            <input type="submit" name="delete_button" value="Delete" />
            <br><br>
            <div>
                <label id="updateStatusText"></label>
            </div>
        </form>
        </center>
        </div>
        <center>
        <h2>Create</h2>
        <form id=createform method="POST" action="account_create.php"> 
            First name:<br>
            <input type="text" name="firstname" value=""><br><br>
            Last name:<br>
            <input type="text" name="lastname" value=""><br><br>
            Email Address:<br>
            <input type="text" name="email" value=""><br><br>
            Password:<br>
            <input type="text" name="password" value=""><br><br>
            <input type="submit" value="Submit">
            <br><br>
            <div>
                    <label id="createStatusText"></label>
            </div>
        </form>
        </center>
    </div>
</div>
</body>
<script type="text/javascript">
    
    function setHidden()  
    {   
        var operation = findGetParameter("operation");
        var status = findGetParameter("status");

        if(operation === "delete"){
            if(status === "1") document.getElementById("updateStatusText").innerHTML  = "Entry Deleted";
            if(status === "0") document.getElementById("updateStatusText").innerHTML  = "Entry Failed To Delete";
        }
        if(operation === "update"){
            if(status === "1") document.getElementById("updateStatusText").innerHTML  = "Entry Updated";
            if(status === "0") document.getElementById("updateStatusText").innerHTML  = "Entry Failed To Update";        
        }
        if(operation === "create"){
            if(status === "1") document.getElementById("createStatusText").innerHTML  = "Entry Created";
            if(status === "0") document.getElementById("createStatusText").innerHTML  = "Failed to Create Entry";        
        }
        if(operation === "search"){
            if(status === "0") document.getElementById("searchStatusText").innerHTML  = "Failed to Find Entry";        
        }
    }

    setHidden();

    function updateDeleteForm(action) {
      var form = document.getElementById('updateForm');
      form.action = action;
      form.submit();
    }
    
    function loadForms() {
        document.getElementById("results_email").value = findGetParameter("email");
        document.getElementById("results_firstname").value = findGetParameter("fname");
        document.getElementById("results_lastname").value = findGetParameter("lname");
        document.getElementById("results_password").value = findGetParameter("password");
    }
    loadForms();
</script>
</html>

<script>


function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
    document.getElementById("main").style.marginLeft = "250px";
    document.body.style.backgroundColor = "rgba(46, 236, 150, 0.7)";
  }
  
  function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft = "0";
    document.body.style.backgroundColor = "#2eec96";
  }
</script>